<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Almanca Diyalog Dinle</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding-top: 80px;
      background-color: #f2f2f2;
    }
    button {
      font-size: 24px;
      padding: 20px 40px;
      border: none;
      background-color: #4CAF50;
      color: white;
      border-radius: 12px;
      cursor: pointer;
      margin-top: 20px;
    }
    button:hover { background-color: #45a049; }
    .mic { margin-right: 10px; }
    #settings { margin-bottom: 30px; }
    input { font-size: 18px; width: 60px; text-align: center; }
    .home-button {
      position: fixed; bottom: 20px; left: 50%;
      transform: translateX(-50%);
      background-color: #007BFF; color: white;
      padding: 12px 24px; font-size: 18px; font-weight: bold;
      border-radius: 30px; text-decoration: none;
      box-shadow: 0px 4px 10px rgba(0,0,0,0.3);
      z-index: 9999; transition: background-color 0.3s ease;
    }
    .home-button:hover { background-color: #0056b3; }
    #toggleModeBtn {
      position: fixed; top: 10px; right: 10px;
      font-size: 14px; padding: 10px 18px;
      font-weight: bold; background-color: #acaaaa;
      cursor: pointer;
    }
    #statsBox {
      position: fixed; top: 15px; left: 10px;
      background-color: white; border: 2px solid #444;
      border-radius: 10px; padding: 10px 15px;
      font-size: 14px; z-index: 1000; line-height: 1.5;
    }
    #currentSentence {
      font-size: 20px;
      font-weight: normal;
      margin-top: 20px;
      text-align: left;
      line-height: 1.5;
      max-width: 900px;
      margin-left: auto;
      margin-right: auto;
    }
    #startButton {
  display: block;
  margin: 20px auto;
}
    #currentSentence p { margin: 6px 0; }
  </style>
</head>
<body>

  <div id="settings">
    <label for="delayInput">Bekleme √ßarpanƒ± (saniye): </label>
    <input type="number" id="delayInput" value="0.1" step="0.1" min="0">
  </div>

<button onclick="toggleSpeech()" id="startButton">
    <span class="mic">üé§</span> Konu≈ümaya Ba≈üla
</button>

  <a href="l√∂sung.html" class="home-button">üè† Ana Sayfaya D√∂n</a>

  <div id="currentSentence"></div>

  <button id="toggleModeBtn" onclick="toggleReadingMode()">Mod: Sƒ±ralƒ±</button>

  <div id="statsBox">
    üìä √ñƒürenilen: <span id="sentenceCount">0</span><br />
    ‚è±Ô∏è S√ºre: <span id="workTime">0</span> dk
  </div>

  <script>
    let isSpeaking = false;
    let synth = window.speechSynthesis;
    let speakingLoop;
    let isRandomMode = false;
    let currentIndex = 0;

    // ‚úÖ Metinler satƒ±r satƒ±r dizi halinde
const sentences = [
  "4- F√ºr Stra√üenkinder",
  "Sie wollen gemeinsam Geld f√ºr Stra√üenkinder sammeln.",
  "Sprechen Sie mit Ihrem Partner, welche Ideen Sie haben, und einigen Sie sich √ºber Einzelheiten: wer, was, wann usw. machen soll.",
  "",
  "(1) Ich habe neulich bemerkt, dass es in unserer Stadt viele Stra√üenkinder gibt. Ich denke, wir sollten ihnen helfen. Wir wollen gemeinsam Geld f√ºr Stra√üenkinder sammeln. Hast du eine Idee?",
  "(2) Ja, gerne k√∂nnen wir uns zusammen organisieren, um Geld zu sammeln, denn es gibt so viele Kinder, die keine Unterkunft haben, und das ist traurig.",
  "(1) Am Anfang k√∂nnen wir ein Fest in unserem Stadtpark organisieren und Menschen einladen, zu kommen und zu spenden.",
  "(1) Gute Idee. Und es w√§re besser, wenn wir eine Anzeige in der Zeitung machen, damit viele Leute kommen und wir mehr Geld sammeln.",
  "(2) Ich stimme dir zu. Was meinst du dazu, wenn wir auch in der Schule und an der Universit√§t Geld sammeln?",
  "(2) Ja, das ist eine wunderbare Idee. Meine Schwester, die an der Universit√§t studiert, kann uns einfach helfen. Ich finde, es w√§re gut, wenn wir Bl√§tter drucken, um sie an Studenten und Sch√ºler zu verteilen.",
  "(1) Ich habe auch eine andere Idee: dass wir am Sonntag zur Kirche gehen und dort mit den Leuten dar√ºber sprechen. Was sagst du dazu?",
  "(2) Prima. Und wir k√∂nnen am Sonntag zur Kirche gehen. Was k√∂nnen wir noch machen? Wie w√§re es, wenn wir ein Buffet organisieren? Wir k√∂nnen zum Beispiel Kuchen verkaufen und das Geld spenden.",
  "(1) Wei√üt du, vielleicht ist es besser, mit einer Wohlt√§tigkeitsorganisation zusammenzuarbeiten, damit die Menschen mit ihr kommunizieren k√∂nnen. Es gibt in unserer Stadt eine Kinderhilfeorganisation, mit der wir Kontakt aufnehmen k√∂nnen. Sie wissen, was wir brauchen.",
  "(2) Du hast recht. Das ist das wichtigste Thema. Ich schlage auch vor, dass wir die Gesch√§fte in unserer Stadt um finanzielle Unterst√ºtzung bitten, damit wir den Stra√üenkindern helfen k√∂nnen.",
  "(2) Toll. Ich kann auch mit meinem Freund zu Gesch√§ften in andere St√§dte gehen und sie um Hilfe bitten.",
  "(1) Ja, das ist eine super Idee. Meine Tante hat beim Roten Kreuz gearbeitet, sie kann einfach mit ihrem Chef organisieren.",
  "(2) Wir haben viele gute Ideen. Wir sollen uns wieder treffen und genau sprechen. K√∂nnen wir uns am Samstag treffen?",
  "(1) Du hast recht. Wir sollen uns treffen. Samstag nach 12 Uhr sollen wir uns im Caf√© treffen. Passt es dir?",
  "(2) Toll. Dann machen wir das. Bis Samstag."
];



    function getTodayKey() {
      const now = new Date();
      return now.toISOString().slice(0, 10);
    }

    let sentenceCount = parseInt(localStorage.getItem("sentenceCount_" + getTodayKey())) || 0;
    let workSeconds = parseInt(localStorage.getItem("workSeconds_" + getTodayKey())) || 0;

    function updateStats() {
      document.getElementById("sentenceCount").textContent = sentenceCount;
      document.getElementById("workTime").textContent = Math.floor(workSeconds / 60);
      localStorage.setItem("sentenceCount_" + getTodayKey(), sentenceCount);
      localStorage.setItem("workSeconds_" + getTodayKey(), workSeconds);
    }

    function startStatsClock() {
      setInterval(() => {
        workSeconds++;
        updateStats();
      }, 1000);
    }

    function toggleReadingMode() {
      isRandomMode = !isRandomMode;
      const btn = document.getElementById("toggleModeBtn");
      btn.textContent = isRandomMode ? "Mod: Rastgele" : "Mod: Sƒ±ralƒ±";
    }

    window.onload = function () {
      currentIndex = 0;
      updateStats();
      startStatsClock();
      // ƒ∞lk y√ºklemede t√ºm metni g√∂ster
      document.getElementById("currentSentence").innerHTML =
        sentences.map(line => "<p>" + line + "</p>").join("");
    };

    function speakRandomSentence() {
      if (!isSpeaking) return;

      synth.cancel();

      let sentence;
      if (isRandomMode) {
        sentence = sentences[Math.floor(Math.random() * sentences.length)];
      } else {
        if (currentIndex >= sentences.length) currentIndex = 0;
        sentence = sentences[currentIndex];
        currentIndex++;
      }

      let utterance = new SpeechSynthesisUtterance(sentence);
      utterance.lang = 'de-DE';
      utterance.rate = 0.9;

      synth.speak(utterance);

      sentenceCount++;
      updateStats();

      utterance.onend = () => {
        let multiplier = parseFloat(document.getElementById('delayInput').value) || 0.1;
        let wordCount = sentence.trim().split(/\s+/).length;
        let calculatedDelay = wordCount * multiplier;
        speakingLoop = setTimeout(speakRandomSentence, calculatedDelay * 1000);
      };
    }

    function toggleSpeech() {
      const button = document.getElementById("startButton");

      if (!isSpeaking) {
        isSpeaking = true;
        button.style.backgroundColor = "#4CAF50";
        button.textContent = " üé§ Konu≈ümayƒ± Durdur";
        speakRandomSentence();
      } else {
        isSpeaking = false;
        button.style.backgroundColor = "#db343c";
        button.innerHTML = '<span class="mic">üé§</span> Konu≈ümaya Ba≈üla';
        synth.cancel();
        clearTimeout(speakingLoop);
      }
    }
  </script>
</body>
</html>
