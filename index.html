<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>ANA SAYFA</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      background: #FFF8E1;
      width: 100vw;
      height: 100vh;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }
    .welcome {
      font-size: 8rem;
      font-weight: bold;
      letter-spacing: 6px;
      color: #b98d00;
      text-align: center;
      margin-bottom: 60px;
      margin-top: 0;
    }
    .b2-prufung {
      font-size: 4rem;
      font-weight: bold;
      color: hsl(51, 91%, 31%);
      letter-spacing: 3px;
      text-align: center;
      margin-bottom: 40px;
      text-transform: uppercase;
    }
    .main-rows {
      width: 90vw;
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      align-items: flex-start;
      gap: 10px;
      margin-top: -25px;
    }
    .btn-group {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 24px;
    }
    .btn-group.left {
      align-items: flex-start;
    }
    .btn-group.right {
      align-items: flex-end;
    }
    .btn-group.center {
      align-items: center;
    }
    .btn-custom {
      font-size: 1.3rem;
      padding: 20px 48px;
      border-radius: 18px;
      border: none;
      background: #ffd400;
      color: #543c00;
      font-weight: bold;
      cursor: pointer;
      box-shadow: 0 2px 8px #0002;
      transition: background 0.25s;
      letter-spacing: 1.5px;
      min-width: 320px;
      text-align: center;
    }
    .btn-custom:hover {
      background: #ffe055;
    }
    #sifreEkrani {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: #fff8e1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 9999;
    }
    #icerik {
      display: none;
    }
    input[type="password"] {
      font-size: 1.2rem;
      padding: 10px;
      border-radius: 10px;
      border: 1px solid #999;
      margin-top: 10px;
      text-align: center;
    }
    button#girisBtn {
      margin-top: 20px;
      padding: 10px 20px;
      font-size: 1rem;
      border-radius: 8px;
      background-color: #ffd400;
      border: none;
      cursor: pointer;
      font-weight: bold;
    }
    @media (max-width: 900px) {
      .welcome { font-size: 3rem; }
      .b2-prufung { font-size: 2rem; }
      .btn-custom { min-width: 90vw; font-size: 1rem; }
      .main-rows { flex-direction: column; align-items: center; }
      .btn-group { align-items: center !important; }
    }
  </style>
<script>

  // ====== Ayarlar ======
  const VALID_PASSWORDS = ["zelal", "Bahtar", "2005"];   // izin verdiƒüin ≈üifreler
  const DEVICE_ID_KEY = "device_id_v1";          // bu tarayƒ±cƒ±ya ait sabit cihaz id
  const SESSION_OK_KEY = "girisYapildi";         // sessionStorage anahtarƒ±
  const SESSION_PW_HASH_KEY = "pwHash";          // sessionStorage: hangi ≈üifre ile giri≈ü yapƒ±ldƒ± (hash)
  const WORKER_URL = "https://nameless-resonance-c9ce.kc-kadricelik.workers.dev";

  // Bu tarayƒ±cƒ±da tekil bir cihaz kimliƒüi √ºret (ilk kez) ve sakla
  function getDeviceId() {
    let id = localStorage.getItem(DEVICE_ID_KEY);
    if (!id) {
      id = (crypto.randomUUID ? crypto.randomUUID() : (Date.now() + "-" + Math.random()));
      localStorage.setItem(DEVICE_ID_KEY, id);
    }
    return id;
  }

  // ≈ûifreyi localStorage anahtarƒ± olarak saklamamak i√ßin SHA-256 hash √ºret
  async function sha256(text) {
    const enc = new TextEncoder().encode(text);
    const buf = await crypto.subtle.digest("SHA-256", enc);
    return Array.from(new Uint8Array(buf)).map(b => b.toString(16).padStart(2, "0")).join("");
  }

  async function showContentIfSessionValid() {
    if (sessionStorage.getItem(SESSION_OK_KEY) !== "evet") return;
    // Sekme a√ßƒ±kken tekrar ≈üifre sormadan i√ßeriƒüi g√∂ster
    document.getElementById("sifreEkrani").style.display = "none";
    document.getElementById("icerik").style.display = "block";
  }

  window.addEventListener("load", () => {
    // G√ºvenlik: i√ßerik her zaman kapalƒ± ba≈ülar, sadece kontrol sonrasƒ± a√ßƒ±lƒ±r
    document.getElementById("sifreEkrani").style.display = "flex";
    document.getElementById("icerik").style.display = "none";
    showContentIfSessionValid();
  });

  async function kontrolEt() {
    const sifre = document.getElementById("sifre").value.trim();
    if (!sifre) {
      alert("≈ûifre giriniz.");
      return;
    }

    try {
      const r = await fetch(WORKER_URL + "/login", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ password: sifre, deviceId: getDeviceId() })
      });

      const data = await r.json().catch(() => ({}));

      if (!r.ok) {
        if (r.status === 401) {
          alert("‚ùå Yanlƒ±≈ü ≈üifre!");
          return;
        }
        if (r.status === 403 && data && data.reason === "device_mismatch") {
          alert("‚õî Bu ≈üifre ba≈üka bir cihaza baƒülƒ±. Bu cihazdan giri≈ü yapƒ±lamaz.");
          return;
        }
        alert("‚ùå Giri≈ü yapƒ±lamadƒ±. (Worker hata)");
        return;
      }

      // Oturum (sekme kapatƒ±lƒ±nca biter)
      const pwHash = await sha256(sifre);
      sessionStorage.setItem(SESSION_OK_KEY, "evet");
      sessionStorage.setItem(SESSION_PW_HASH_KEY, pwHash);

      document.getElementById("sifreEkrani").style.display = "none";
      document.getElementById("icerik").style.display = "block";
    } catch (e) {
      alert("‚ùå Baƒülantƒ± hatasƒ±. Worker URL doƒüru mu?");
    }
  }

</script>
</head>
<body>

<div id="sifreEkrani">
  <h2>üîí Sayfa Korumalƒ±</h2>
  <p>L√ºtfen ≈üifreyi girin:</p>
  <input type="password" id="sifre" placeholder="≈ûifre girin">
  <button id="girisBtn" onclick="kontrolEt()">Giri≈ü</button>
</div>

<div id="icerik">
  <div class="welcome">HO≈û GELDƒ∞Nƒ∞Z</div>
  <div class="b2-prufung">B2 PR√úFUNG</div>
  <div class="main-rows">
    <div class="btn-group left">
      <button class="btn-custom" onclick="window.location.href='lese1.html'">Leseverstehen Teil 1</button>
      <button class="btn-custom" onclick="window.location.href='lese2.html'">Leseverstehen Teil 2</button>
      <button class="btn-custom" onclick="window.location.href='lese3.html'">Leseverstehen Teil 3</button>
      <button class="btn-custom" onclick="window.location.href='g√ºnl√ºk konu≈üma.html'">G√ºnl√ºk Konu≈üma</button>
      <button class="btn-custom" onclick="window.location.href='lese0.html'">Leseverstehen Teil 11</button>
       <button class="btn-custom" onclick="window.location.href='sunum en son.html'">Sunum</button>
    </div>
    <div class="btn-group center">
      <button class="btn-custom" onclick="window.location.href='sprach1.html'">Sprachbausteine Teil 1</button>
      <button class="btn-custom" onclick="window.location.href='sprach2.html'">Sprachbausteine Teil 2</button>
      <button class="btn-custom" onclick="window.location.href='wortschatz.html'">Wortschatz</button>
      <button class="btn-custom" onclick="window.location.href='wortschatz cep.html'">wortschatz cep.html</button>
    </div>
    <div class="btn-group right">
      <button class="btn-custom" onclick="window.location.href='quiz.html'">H√∂rverstehen Teil 1</button>
      <button class="btn-custom" onclick="window.location.href='quiz2.html'">H√∂rverstehen Teil 2</button>
      <button class="btn-custom" onclick="window.location.href='quiz3.html'">H√∂rverstehen Teil 3</button>
       <button class="btn-custom" onclick="window.location.href='quiz4.html'">H√∂rverstehen Karma</button>
        <button class="btn-custom" onclick="window.location.href='quiz5.html'">Karma</button>
       <button class="btn-custom" onclick="window.location.href='l√∂sung.html'">Etwas Planen</button>
    
    </div>
  </div>
</div>

</body>
</html>




















