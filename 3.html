<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Almanca Diyalog Dinle</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding-top: 80px;
      background-color: #f2f2f2;
    }
    button {
      font-size: 24px;
      padding: 20px 40px;
      border: none;
      background-color: #4CAF50;
      color: white;
      border-radius: 12px;
      cursor: pointer;
      margin-top: 20px;
    }
    button:hover { background-color: #45a049; }
    .mic { margin-right: 10px; }
    #settings { margin-bottom: 30px; }
    input { font-size: 18px; width: 60px; text-align: center; }
    .home-button {
      position: fixed; bottom: 20px; left: 50%;
      transform: translateX(-50%);
      background-color: #007BFF; color: white;
      padding: 12px 24px; font-size: 18px; font-weight: bold;
      border-radius: 30px; text-decoration: none;
      box-shadow: 0px 4px 10px rgba(0,0,0,0.3);
      z-index: 9999; transition: background-color 0.3s ease;
    }
    .home-button:hover { background-color: #0056b3; }
    #toggleModeBtn {
      position: fixed; top: 10px; right: 10px;
      font-size: 14px; padding: 10px 18px;
      font-weight: bold; background-color: #acaaaa;
      cursor: pointer;
    }
    #statsBox {
      position: fixed; top: 15px; left: 10px;
      background-color: white; border: 2px solid #444;
      border-radius: 10px; padding: 10px 15px;
      font-size: 14px; z-index: 1000; line-height: 1.5;
    }
    #currentSentence {
      font-size: 20px;
      font-weight: normal;
      margin-top: 20px;
      text-align: left;
      line-height: 1.5;
      max-width: 900px;
      margin-left: auto;
      margin-right: auto;
    }
    #startButton {
  display: block;
  margin: 20px auto;
}
    #currentSentence p { margin: 6px 0; }
  </style>
</head>
<body>

  <div id="settings">
    <label for="delayInput">Bekleme √ßarpanƒ± (saniye): </label>
    <input type="number" id="delayInput" value="0.1" step="0.1" min="0">
  </div>

<button onclick="toggleSpeech()" id="startButton">
    <span class="mic">üé§</span> Konu≈ümaya Ba≈üla
</button>

  <a href="l√∂sung.html" class="home-button">üè† Ana Sayfaya D√∂n</a>

  <div id="currentSentence"></div>

  <button id="toggleModeBtn" onclick="toggleReadingMode()">Mod: Sƒ±ralƒ±</button>

  <div id="statsBox">
    üìä √ñƒürenilen: <span id="sentenceCount">0</span><br />
    ‚è±Ô∏è S√ºre: <span id="workTime">0</span> dk
  </div>

  <script>
    let isSpeaking = false;
    let synth = window.speechSynthesis;
    let speakingLoop;
    let isRandomMode = false;
    let currentIndex = 0;

    // ‚úÖ Metinler satƒ±r satƒ±r dizi halinde
const sentences = [
  "3- Vortrag √ºber Erfahrungen von Fremdsprache",
  "Sie sind von einer Schule eingeladen worden, um √ºber die Notwendigkeit des Fremdsprachenlernens aus Ihrer Sicht und Ihren Erfahrungen zu berichten.",
  "Sammeln Sie Argumente und machen Sie Ihrem Partner/Ihrer Partnerin Vorschl√§ge.",
  "Erstellen Sie zusammen eine Liste mit Stichpunkten f√ºr eine 15-min√ºtige Pr√§sentation vor den Sch√ºlern.",
  "",
  "(2) Hallo X, wie du wei√üt, wir wurden von der Schule eingeladen, √ºber unsere Erfahrungen mit dem Erlernen von Fremdsprachen zu sprechen. Also w√ºrdest du dabei helfen?",
  "(1) Ja, ich bin dabei. Allerdings m√ºssen wir daf√ºr gemeinsam einen Plan erstellen. Was denkst du, was sollten wir zuerst tun?",
  "(2) Ich habe schon einige Notizen gemacht. Wir haben nur 15 Minuten Zeit, um uns vor den Sch√ºlern zu pr√§sentieren. Wir brauchen nicht nur einen Computer, sondern auch einen Beamer f√ºr unsere Pr√§sentation.",
  "(1) Ich glaube, in der Schule gibt es alles. Wei√üt du, was wir √ºber Fremdsprache sprechen k√∂nnten? Hast du eine Idee?",
  "(2) Wir m√ºssen zuerst √ºber die Wichtigkeit der Fremdsprache in unserem Leben reden. Was denkst du, wenn wir einen Film zeigen, der diesen Punkt erkl√§rt?",
  "(1) Wir sollten sagen, dass die Wichtigkeit der Fremdsprache sowohl beim Arbeitssuchen als auch beim Reisen eine Rolle spielt. Was meinst du?",
  "(2) Ich stimme dir zu. Und was h√§ltst du davon, wenn wir einige lustige Situationen erz√§hlen, die wir durchgemacht haben, damit sich die Sch√ºler nicht langweilen?",
  "(1) Ich stimme dir zu, das ist eine wunderbare Idee. Wir sollten auch zeigen, wie man eine Fremdsprache lernen kann. Man sollte schreiben, h√∂ren und lesen. Alle Sinne spielen eine wichtige Rolle beim Fremdsprachenlernen.",
  "(2) Du hast recht. Wir d√ºrfen nicht vergessen aufzuschreiben, was wir vereinbart haben.",
  "(1) Ich denke, dass wir alle Punkte besprochen haben und hoffe auch, dass wir gut organisiert sind. Aber wir sollen uns wieder treffen, um alles noch einmal zu besprechen.",
  "(2) Dieser Plan gef√§llt mir auch gut. Du hast recht. Wir sollten das besprechen. Dann m√ºssen wir die Organisation dem Schulleiter vorlegen. Wann sollen wir uns treffen? Hast du am Samstag Zeit?",
  "(1) Ja, am Samstag habe ich nach 12:00 Uhr Zeit. Passt es dir?",
  "(2) Dann machen wir das. Ja, das passt mir auch. Vielen Dank f√ºr deine Hilfe. Bis dann.",
  "(1) Bitte sehr, bis Samstag."
];


    function getTodayKey() {
      const now = new Date();
      return now.toISOString().slice(0, 10);
    }

    let sentenceCount = parseInt(localStorage.getItem("sentenceCount_" + getTodayKey())) || 0;
    let workSeconds = parseInt(localStorage.getItem("workSeconds_" + getTodayKey())) || 0;

    function updateStats() {
      document.getElementById("sentenceCount").textContent = sentenceCount;
      document.getElementById("workTime").textContent = Math.floor(workSeconds / 60);
      localStorage.setItem("sentenceCount_" + getTodayKey(), sentenceCount);
      localStorage.setItem("workSeconds_" + getTodayKey(), workSeconds);
    }

    function startStatsClock() {
      setInterval(() => {
        workSeconds++;
        updateStats();
      }, 1000);
    }

    function toggleReadingMode() {
      isRandomMode = !isRandomMode;
      const btn = document.getElementById("toggleModeBtn");
      btn.textContent = isRandomMode ? "Mod: Rastgele" : "Mod: Sƒ±ralƒ±";
    }

    window.onload = function () {
      currentIndex = 0;
      updateStats();
      startStatsClock();
      // ƒ∞lk y√ºklemede t√ºm metni g√∂ster
      document.getElementById("currentSentence").innerHTML =
        sentences.map(line => "<p>" + line + "</p>").join("");
    };

    function speakRandomSentence() {
      if (!isSpeaking) return;

      synth.cancel();

      let sentence;
      if (isRandomMode) {
        sentence = sentences[Math.floor(Math.random() * sentences.length)];
      } else {
        if (currentIndex >= sentences.length) currentIndex = 0;
        sentence = sentences[currentIndex];
        currentIndex++;
      }

      let utterance = new SpeechSynthesisUtterance(sentence);
      utterance.lang = 'de-DE';
      utterance.rate = 0.9;

      synth.speak(utterance);

      sentenceCount++;
      updateStats();

      utterance.onend = () => {
        let multiplier = parseFloat(document.getElementById('delayInput').value) || 0.1;
        let wordCount = sentence.trim().split(/\s+/).length;
        let calculatedDelay = wordCount * multiplier;
        speakingLoop = setTimeout(speakRandomSentence, calculatedDelay * 1000);
      };
    }

    function toggleSpeech() {
      const button = document.getElementById("startButton");

      if (!isSpeaking) {
        isSpeaking = true;
        button.style.backgroundColor = "#4CAF50";
        button.textContent = " üé§ Konu≈ümayƒ± Durdur";
        speakRandomSentence();
      } else {
        isSpeaking = false;
        button.style.backgroundColor = "#db343c";
        button.innerHTML = '<span class="mic">üé§</span> Konu≈ümaya Ba≈üla';
        synth.cancel();
        clearTimeout(speakingLoop);
      }
    }
  </script>
</body>
</html>
