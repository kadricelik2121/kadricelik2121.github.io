<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Almanca Diyalog Dinle</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding-top: 80px;
      background-color: #f2f2f2;
    }
    button {
      font-size: 24px;
      padding: 20px 40px;
      border: none;
      background-color: #4CAF50;
      color: white;
      border-radius: 12px;
      cursor: pointer;
      margin-top: 20px;
    }
    button:hover { background-color: #45a049; }
    .mic { margin-right: 10px; }
    #settings { margin-bottom: 30px; }
    input { font-size: 18px; width: 60px; text-align: center; }
    .home-button {
      position: fixed; bottom: 20px; left: 50%;
      transform: translateX(-50%);
      background-color: #007BFF; color: white;
      padding: 12px 24px; font-size: 18px; font-weight: bold;
      border-radius: 30px; text-decoration: none;
      box-shadow: 0px 4px 10px rgba(0,0,0,0.3);
      z-index: 9999; transition: background-color 0.3s ease;
    }
    .home-button:hover { background-color: #0056b3; }
    #toggleModeBtn {
      position: fixed; top: 10px; right: 10px;
      font-size: 14px; padding: 10px 18px;
      font-weight: bold; background-color: #acaaaa;
      cursor: pointer;
    }
    #statsBox {
      position: fixed; top: 15px; left: 10px;
      background-color: white; border: 2px solid #444;
      border-radius: 10px; padding: 10px 15px;
      font-size: 14px; z-index: 1000; line-height: 1.5;
    }
    #currentSentence {
      font-size: 20px;
      font-weight: normal;
      margin-top: 20px;
      text-align: left;
      line-height: 1.5;
      max-width: 900px;
      margin-left: auto;
      margin-right: auto;
    }
    #startButton {
  display: block;
  margin: 20px auto;
}
    #currentSentence p { margin: 6px 0; }
  </style>
</head>
<body>

  <div id="settings">
    <label for="delayInput">Bekleme √ßarpanƒ± (saniye): </label>
    <input type="number" id="delayInput" value="0.1" step="0.1" min="0">
  </div>

<button onclick="toggleSpeech()" id="startButton">
    <span class="mic">üé§</span> Konu≈ümaya Ba≈üla
</button>

  <a href="l√∂sung.html" class="home-button">üè† Ana Sayfaya D√∂n</a>

  <div id="currentSentence"></div>

  <button id="toggleModeBtn" onclick="toggleReadingMode()">Mod: Sƒ±ralƒ±</button>

  <div id="statsBox">
    üìä √ñƒürenilen: <span id="sentenceCount">0</span><br />
    ‚è±Ô∏è S√ºre: <span id="workTime">0</span> dk
  </div>

  <script>
    let isSpeaking = false;
    let synth = window.speechSynthesis;
    let speakingLoop;
    let isRandomMode = false;
    let currentIndex = 0;

    // ‚úÖ Metinler satƒ±r satƒ±r dizi halinde
const sentences = [
  "12- Helfen Freunden, die umziehen wollen",
  "Ihr Freund m√∂chte in eine andere Stadt umziehen und Sie wollen beim Umzug helfen.",
  "√úberlegen Sie, wie Sie helfen k√∂nnen, und machen Sie Ihrem Partner/Ihrer Partnerin Vorschl√§ge.",
  "",
  "Mohamad: Hast du geh√∂rt, dass unser Freund Ali nach K√∂ln umziehen m√∂chte und er Hilfe braucht? Hast du Lust zu helfen?",
  "Anna: Ja, nat√ºrlich, warum nicht. Ich freue mich darauf.",
  "Mohamad: Hallo, wie du wei√üt, unser Freund Tariq will n√§chsten Monat nach Hamburg umziehen, da seine aktuelle Wohnung nicht nur klein ist, sondern er auch in Hamburg studiert. Ich m√∂chte ihm gerne beim Umzug helfen. Was denkst du, was k√∂nnen wir tun?",
  "Wafaa: Wirklich? Das ist eine gute Nachricht. Wir k√∂nnen ihm gerne gemeinsam helfen. Aber wann wird er in das neue Haus umziehen?",
  "Mohamad: Er wird am Samstag, den 12. August umziehen. Hast du eine Idee, wie wir ihm helfen k√∂nnen?",
  "Wafaa: Nat√ºrlich. Lass uns zun√§chst √ºberlegen, wie wir das mit dem Umzug machen. Mein Bruder hat ein gro√ües Auto und kann uns helfen. Aber hast du Umzugskartons?",
  "Mohamad: Ja, ich habe zu Hause Umzugskartons, ich bringe sie mit. Dann ruf bitte deinen Bruder und mach einen Termin mit ihm. Wie w√§re es, wenn wir ihm beim Aufbau der Schr√§nke helfen? Ich schlage vor, dass wir ihm auch beim Einpacken der Sachen helfen. Was meinst du?",
  "Wafaa: Ich stimme dir zu. Wir k√∂nnen die Sachen einpacken. Au√üerdem k√∂nnen wir auch unsere Freunde Hamza, Abo Jassmen, Ahmad und Jassar fragen, ob sie uns helfen. Was k√∂nnen wir noch machen?",
  "Mohamad: Wie w√§re es, wenn wir Essen mitnehmen? Ich packe Pizza und koche Nudeln mit Paprika und Tomaten. Findest du das eine gute Idee?",
  "Nils: Ich habe den Vorschlag, dass ich nicht nur mein Auto bringe, sondern auch meine Werkzeuge mitnehme. Was meinst du dazu?",
  "Wafaa: Ja, das ist eine gute Idee. Und was h√§ltst du davon, wenn ich Getr√§nke mitbringe? Ich denke, wir brauchen viele Getr√§nke.",
  "Mohamad: Du hast recht, da wir im Sommer sind. Und was meinst du, wenn wir ihm beim Abbau der K√ºche in der neuen Wohnung helfen?",
  "Wafaa: Ehrlich gesagt habe ich keine Erfahrung in diesem Gebiet, aber mein Nachbar arbeitet in diesem Bereich. Ich kann ihn bitten, uns zu helfen.",
  "Mohamad: Super. Aber wann k√∂nnen wir uns treffen?",
  "Nils: Einerseits ist es positiv, wenn du seine Kinder zu dir nach Hause nimmst und deine Frau aufpasst. Aus meiner Erfahrung k√∂nnte ich die K√ºchenzeile abbauen.",
  "Wafaa: Wir k√∂nnen fr√ºh um 7 Uhr morgens anfangen. Es wird besser sein, wenn wir fr√ºh beginnen, damit wir schneller fertig sind. Stimmst du mir zu?",
  "Mohamad: Toll. Hast du einen Anh√§nger?",
  "Nils: Ja, ich habe vor einem Monat einen gekauft.",
  "Mohamad: Nat√ºrlich. Morgen ist besser. Kannst du mich bitte abholen?",
  "Nils: Wir haben eine Hochzeitsparty gemacht, und du hast uns nicht eingeladen?!!!",
  "Wafaa: Ja, nat√ºrlich. Ich hole dich gerne ab.",
  "Mohamad: Danke. Bis Samstag.",
  "",
  "Anna: Ich finde, das ist sehr nett. Eine andere Idee k√∂nnte sein, einen Tanz zu organisieren. Was ist deine Meinung, wenn wir mit unseren Freunden einen Tanz einstudieren?",
  "Nils: Ich hoffe, dass das Geschenk ihm gefallen wird. Wir haben alle Punkte besprochen. Aber wir sollen uns wieder treffen, um alles noch einmal zu besprechen.",
  "Anna: Dieser Plan gef√§llt mir auch gut. Du hast recht. Wir sollten das besprechen. Dann m√ºssen wir unsere Idee den anderen Freunden vorstellen. Wann sollen wir uns treffen? Hast du am Samstag Zeit?",
  "Nils: Ja, am Samstag habe ich nach 12:00 Uhr Zeit. Passt es dir?",
  "Anna: Dann machen wir das. Ja, das passt mir auch. Vielen Dank f√ºr deine Hilfe. Bis dann.",
  "Nils: Bitte sehr, bis Samstag!"
];





    function getTodayKey() {
      const now = new Date();
      return now.toISOString().slice(0, 10);
    }

    let sentenceCount = parseInt(localStorage.getItem("sentenceCount_" + getTodayKey())) || 0;
    let workSeconds = parseInt(localStorage.getItem("workSeconds_" + getTodayKey())) || 0;

    function updateStats() {
      document.getElementById("sentenceCount").textContent = sentenceCount;
      document.getElementById("workTime").textContent = Math.floor(workSeconds / 60);
      localStorage.setItem("sentenceCount_" + getTodayKey(), sentenceCount);
      localStorage.setItem("workSeconds_" + getTodayKey(), workSeconds);
    }

    function startStatsClock() {
      setInterval(() => {
        workSeconds++;
        updateStats();
      }, 1000);
    }

    function toggleReadingMode() {
      isRandomMode = !isRandomMode;
      const btn = document.getElementById("toggleModeBtn");
      btn.textContent = isRandomMode ? "Mod: Rastgele" : "Mod: Sƒ±ralƒ±";
    }

    window.onload = function () {
      currentIndex = 0;
      updateStats();
      startStatsClock();
      // ƒ∞lk y√ºklemede t√ºm metni g√∂ster
      document.getElementById("currentSentence").innerHTML =
        sentences.map(line => "<p>" + line + "</p>").join("");
    };

    function speakRandomSentence() {
      if (!isSpeaking) return;

      synth.cancel();

      let sentence;
      if (isRandomMode) {
        sentence = sentences[Math.floor(Math.random() * sentences.length)];
      } else {
        if (currentIndex >= sentences.length) currentIndex = 0;
        sentence = sentences[currentIndex];
        currentIndex++;
      }

      let utterance = new SpeechSynthesisUtterance(sentence);
      utterance.lang = 'de-DE';
      utterance.rate = 0.9;

      synth.speak(utterance);

      sentenceCount++;
      updateStats();

      utterance.onend = () => {
        let multiplier = parseFloat(document.getElementById('delayInput').value) || 0.1;
        let wordCount = sentence.trim().split(/\s+/).length;
        let calculatedDelay = wordCount * multiplier;
        speakingLoop = setTimeout(speakRandomSentence, calculatedDelay * 1000);
      };
    }

    function toggleSpeech() {
      const button = document.getElementById("startButton");

      if (!isSpeaking) {
        isSpeaking = true;
        button.style.backgroundColor = "#4CAF50";
        button.textContent = " üé§ Konu≈ümayƒ± Durdur";
        speakRandomSentence();
      } else {
        isSpeaking = false;
        button.style.backgroundColor = "#db343c";
        button.innerHTML = '<span class="mic">üé§</span> Konu≈ümaya Ba≈üla';
        synth.cancel();
        clearTimeout(speakingLoop);
      }
    }
  </script>
</body>
</html>
