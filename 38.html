<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Almanca Diyalog Dinle</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding-top: 80px;
      background-color: #f2f2f2;
    }
    button {
      font-size: 24px;
      padding: 20px 40px;
      border: none;
      background-color: #4CAF50;
      color: white;
      border-radius: 12px;
      cursor: pointer;
      margin-top: 20px;
    }
    button:hover { background-color: #45a049; }
    .mic { margin-right: 10px; }
    #settings { margin-bottom: 30px; }
    input { font-size: 18px; width: 60px; text-align: center; }
    .home-button {
      position: fixed; bottom: 20px; left: 50%;
      transform: translateX(-50%);
      background-color: #007BFF; color: white;
      padding: 12px 24px; font-size: 18px; font-weight: bold;
      border-radius: 30px; text-decoration: none;
      box-shadow: 0px 4px 10px rgba(0,0,0,0.3);
      z-index: 9999; transition: background-color 0.3s ease;
    }
    .home-button:hover { background-color: #0056b3; }
    #toggleModeBtn {
      position: fixed; top: 10px; right: 10px;
      font-size: 14px; padding: 10px 18px;
      font-weight: bold; background-color: #acaaaa;
      cursor: pointer;
    }
    #statsBox {
      position: fixed; top: 15px; left: 10px;
      background-color: white; border: 2px solid #444;
      border-radius: 10px; padding: 10px 15px;
      font-size: 14px; z-index: 1000; line-height: 1.5;
    }
    #currentSentence {
      font-size: 20px;
      font-weight: normal;
      margin-top: 20px;
      text-align: left;
      line-height: 1.5;
      max-width: 900px;
      margin-left: auto;
      margin-right: auto;
    }
    #startButton {
  display: block;
  margin: 20px auto;
}
    #currentSentence p { margin: 6px 0; }
  </style>
</head>
<body>

  <div id="settings">
    <label for="delayInput">Bekleme √ßarpanƒ± (saniye): </label>
    <input type="number" id="delayInput" value="0.1" step="0.1" min="0">
  </div>

<button onclick="toggleSpeech()" id="startButton">
    <span class="mic">üé§</span> Konu≈ümaya Ba≈üla
</button>

  <a href="l√∂sung.html" class="home-button">üè† Ana Sayfaya D√∂n</a>

  <div id="currentSentence"></div>

  <button id="toggleModeBtn" onclick="toggleReadingMode()">Mod: Sƒ±ralƒ±</button>

  <div id="statsBox">
    üìä √ñƒürenilen: <span id="sentenceCount">0</span><br />
    ‚è±Ô∏è S√ºre: <span id="workTime">0</span> dk
  </div>

  <script>
    let isSpeaking = false;
    let synth = window.speechSynthesis;
    let speakingLoop;
    let isRandomMode = false;
    let currentIndex = 0;

    // ‚úÖ Metinler satƒ±r satƒ±r dizi halinde
 const sentences = [
  "38- Ausstellung mit dem Titel 'Weltreise'",
  "An einem Rathaus in Ihrer Stadt soll eine Ausstellung mit dem Titel 'Weltreise' stattfinden.",
  "Sie sollen bei der Planung helfen. √úberlegen Sie, was Sie tun k√∂nnen. Denken Sie beispielsweise an Informationsmaterial oder Poster.",
  "",
  "Anna: Hallo Nils, wie du wei√üt, soll im Rathaus unserer Stadt eine Ausstellung mit dem Titel 'Weltreise' stattfinden. Wir sollen bei der Planung helfen. Kannst du mir dabei helfen?",
  "Nils: Ich m√∂chte gern dabei helfen. Allerdings m√ºssen wir daf√ºr gemeinsam einen Plan erstellen. Was denkst du, was sollten wir zuerst tun?",
  "Anna: Ich habe schon einige Notizen gemacht. Der erste Punkt: Wir brauchen einen Computer und einen Bildschirm. Was sonst noch?",
  "Nils: Ich glaube, wir k√∂nnen das vom Rathaus bekommen. Dort k√∂nnten wir nachfragen. Im Rathaus gibt es einen gro√üen Raum mit Computer und Bildschirm. Was k√∂nnten wir au√üerdem machen? Hast du eine Idee?",
  "Anna: Es w√§re besser, wenn wir Brosch√ºren und Fotos √ºber die wichtigsten Touristenst√§dte und Hotels der Welt drucken. Aber wer kann uns helfen? Kennst du jemanden, der im Tourismus arbeitet?",
  "Nils: Leider kenne ich niemanden, aber ich kann beim Touristeninformationszentrum fragen. Vielleicht k√∂nnen sie uns helfen. Wir m√ºssen auch Werbung machen. Wie k√∂nnen wir das erledigen? Hast du eine Idee?",
  "Anna: Wir k√∂nnen eine Anzeige in der Zeitung schreiben und auch im Internet posten. Au√üerdem k√∂nnten wir Flyer mit Datum, Uhrzeit, Ort und Thema an die Leute, Reiseb√ºros, Fluggesellschaften, Studenten, Nachbarn und Hotels verteilen.",
  "Nils: Ich stimme dir zu, das ist eine wunderbare Idee. Wei√üt du, wie viele Tage die Ausstellung dauern soll?",
  "Anna: Ich glaube, dass sie zwei Tage dauern wird.",
  "Nils: Ich sehe das genauso wie du. Ich glaube, dass wir alle Punkte besprochen haben. Aber wir sollten uns wieder treffen, um alles noch einmal zu besprechen.",
  "Anna: Dieser Plan gef√§llt mir auch gut. Du hast recht. Wir sollten uns treffen und unsere Ideen der Kursleiterin und den anderen Freunden vorstellen. Wann sollen wir uns treffen? Hast du am Samstag Zeit?",
  "Nils: Ja, am Samstag habe ich nach 12 Uhr Zeit. Passt es dir?",
  "Anna: Dann machen wir das. Ja, das passt mir auch. Vielen Dank f√ºr deine Hilfe. Bis dann.",
  "Nils: Bitte sehr, bis Samstag."
];






    function getTodayKey() {
      const now = new Date();
      return now.toISOString().slice(0, 10);
    }

    let sentenceCount = parseInt(localStorage.getItem("sentenceCount_" + getTodayKey())) || 0;
    let workSeconds = parseInt(localStorage.getItem("workSeconds_" + getTodayKey())) || 0;

    function updateStats() {
      document.getElementById("sentenceCount").textContent = sentenceCount;
      document.getElementById("workTime").textContent = Math.floor(workSeconds / 60);
      localStorage.setItem("sentenceCount_" + getTodayKey(), sentenceCount);
      localStorage.setItem("workSeconds_" + getTodayKey(), workSeconds);
    }

    function startStatsClock() {
      setInterval(() => {
        workSeconds++;
        updateStats();
      }, 1000);
    }

    function toggleReadingMode() {
      isRandomMode = !isRandomMode;
      const btn = document.getElementById("toggleModeBtn");
      btn.textContent = isRandomMode ? "Mod: Rastgele" : "Mod: Sƒ±ralƒ±";
    }

    window.onload = function () {
      currentIndex = 0;
      updateStats();
      startStatsClock();
      // ƒ∞lk y√ºklemede t√ºm metni g√∂ster
      document.getElementById("currentSentence").innerHTML =
        sentences.map(line => "<p>" + line + "</p>").join("");
    };

    function speakRandomSentence() {
      if (!isSpeaking) return;

      synth.cancel();

      let sentence;
      if (isRandomMode) {
        sentence = sentences[Math.floor(Math.random() * sentences.length)];
      } else {
        if (currentIndex >= sentences.length) currentIndex = 0;
        sentence = sentences[currentIndex];
        currentIndex++;
      }

      let utterance = new SpeechSynthesisUtterance(sentence);
      utterance.lang = 'de-DE';
      utterance.rate = 0.9;

      synth.speak(utterance);

      sentenceCount++;
      updateStats();

      utterance.onend = () => {
        let multiplier = parseFloat(document.getElementById('delayInput').value) || 0.1;
        let wordCount = sentence.trim().split(/\s+/).length;
        let calculatedDelay = wordCount * multiplier;
        speakingLoop = setTimeout(speakRandomSentence, calculatedDelay * 1000);
      };
    }

    function toggleSpeech() {
      const button = document.getElementById("startButton");

      if (!isSpeaking) {
        isSpeaking = true;
        button.style.backgroundColor = "#4CAF50";
        button.textContent = " üé§ Konu≈ümayƒ± Durdur";
        speakRandomSentence();
      } else {
        isSpeaking = false;
        button.style.backgroundColor = "#db343c";
        button.innerHTML = '<span class="mic">üé§</span> Konu≈ümaya Ba≈üla';
        synth.cancel();
        clearTimeout(speakingLoop);
      }
    }
  </script>
</body>
</html>
