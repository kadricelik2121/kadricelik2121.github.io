<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Almanca Diyalog Dinle</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding-top: 80px;
      background-color: #f2f2f2;
    }
    button {
      font-size: 24px;
      padding: 20px 40px;
      border: none;
      background-color: #4CAF50;
      color: white;
      border-radius: 12px;
      cursor: pointer;
      margin-top: 20px;
    }
    button:hover { background-color: #45a049; }
    .mic { margin-right: 10px; }
    #settings { margin-bottom: 30px; }
    input { font-size: 18px; width: 60px; text-align: center; }
    .home-button {
      position: fixed; bottom: 20px; left: 50%;
      transform: translateX(-50%);
      background-color: #007BFF; color: white;
      padding: 12px 24px; font-size: 18px; font-weight: bold;
      border-radius: 30px; text-decoration: none;
      box-shadow: 0px 4px 10px rgba(0,0,0,0.3);
      z-index: 9999; transition: background-color 0.3s ease;
    }
    .home-button:hover { background-color: #0056b3; }
    #toggleModeBtn {
      position: fixed; top: 10px; right: 10px;
      font-size: 14px; padding: 10px 18px;
      font-weight: bold; background-color: #acaaaa;
      cursor: pointer;
    }
    #statsBox {
      position: fixed; top: 15px; left: 10px;
      background-color: white; border: 2px solid #444;
      border-radius: 10px; padding: 10px 15px;
      font-size: 14px; z-index: 1000; line-height: 1.5;
    }
    #currentSentence {
      font-size: 20px;
      font-weight: normal;
      margin-top: 20px;
      text-align: left;
      line-height: 1.5;
      max-width: 900px;
      margin-left: auto;
      margin-right: auto;
    }
    #startButton {
  display: block;
  margin: 20px auto;
}
    #currentSentence p { margin: 6px 0; }
  </style>
</head>
<body>

  <div id="settings">
    <label for="delayInput">Bekleme √ßarpanƒ± (saniye): </label>
    <input type="number" id="delayInput" value="0.1" step="0.1" min="0">
  </div>

<button onclick="toggleSpeech()" id="startButton">
    <span class="mic">üé§</span> Konu≈ümaya Ba≈üla
</button>

  <a href="l√∂sung.html" class="home-button">üè† Ana Sayfaya D√∂n</a>

  <div id="currentSentence"></div>

  <button id="toggleModeBtn" onclick="toggleReadingMode()">Mod: Sƒ±ralƒ±</button>

  <div id="statsBox">
    üìä √ñƒürenilen: <span id="sentenceCount">0</span><br />
    ‚è±Ô∏è S√ºre: <span id="workTime">0</span> dk
  </div>

  <script>
    let isSpeaking = false;
    let synth = window.speechSynthesis;
    let speakingLoop;
    let isRandomMode = false;
    let currentIndex = 0;

    // ‚úÖ Metinler satƒ±r satƒ±r dizi halinde
const sentences = [
  "23- Infotag zum Thema Neue Medien",
  "An einem Bildungsinstitut in Ihrer Stadt soll ein Infotag zum Thema Neue Medien (Internet, Handy, Smartphone und mehr) stattfinden.",
  "Sie sollen bei der Planung helfen.",
  "√úberlegen Sie, was Sie tun k√∂nnen.",
  "Denken Sie beispielsweise an Informationsmaterial, Poster, Vortr√§ge, Pr√§sentationen oder auch Werbung f√ºr den Infotag.",
  "",
  "Nils: Hallo Anna, an einem Bildungsinstitut in unserer Stadt soll ein Infotag zum Thema Neue Medien stattfinden. Wir sollen bei der Planung helfen. Was h√§ltst du davon?",
  "Anna: Ja, ich m√∂chte gerne mithelfen. Lass uns √ºberlegen, was wir machen k√∂nnen. Zuerst m√ºssen wir einen Tag festlegen. Wei√üt du, wann der Infotag stattfinden soll?",
  "Nils: Er soll am Samstag, den 12.09., von 9 bis 14 Uhr stattfinden. Es findet im Bildungsinstitut in unserer Stadt statt. Wei√üt du, was wir tun sollen?",
  "Anna: Zuerst m√ºssen wir Werbung machen. Was h√§ltst du davon, wenn wir eine Anzeige in der Zeitung schreiben und auch im Internet ver√∂ffentlichen? Was k√∂nnen wir noch machen?",
  "Nils: Das ist eine gute Idee. Wir k√∂nnen auch Flyer schreiben und sie mit Zeit, Ort und Thema an Sch√ºler, Studenten, Nachbarn und Freunde verteilen. Was h√§ltst du davon? Und welches Thema sollen wir behandeln?",
  "Anna: Eigentlich habe ich keine Erfahrung, aber mein Bruder hat viele Erfahrungen, weil er bei Media Markt arbeitet. Ich kann ihn anrufen, und er wird gerne kommen, um uns zu helfen.",
  "Nils: Toll, ich hoffe, dass dein Bruder uns die Nachteile und Vorteile der Medien erkl√§ren kann. Aber wei√üt du, welche Ausstattung wir brauchen? Ich denke, dass wir einen Beamer und einen Laptop brauchen.",
  "Anna: Ja, wir brauchen einen Computer und einen Bildschirm. Ich denke, dass alles im Institut vorhanden ist.",
  "Nils: Super. Und was ist mit dem Essen? Ich schlage vor, dass wir ein Buffet machen. Wir k√∂nnen Orangensaft und Kuchen anbieten. Was meinst du dazu?",
  "Anna: Ich stimme dir zu. Ich kann auch S√º√üigkeiten und Apfelsaft mitbringen. Ich denke, dass wir √ºber alle Punkte gesprochen haben und hoffe, dass wir gut organisiert sind und eine gute Zeit haben werden.",
  "Nils: Viel Spa√ü. Bis Samstag.",
  "Anna: Bis dann."
];






    function getTodayKey() {
      const now = new Date();
      return now.toISOString().slice(0, 10);
    }

    let sentenceCount = parseInt(localStorage.getItem("sentenceCount_" + getTodayKey())) || 0;
    let workSeconds = parseInt(localStorage.getItem("workSeconds_" + getTodayKey())) || 0;

    function updateStats() {
      document.getElementById("sentenceCount").textContent = sentenceCount;
      document.getElementById("workTime").textContent = Math.floor(workSeconds / 60);
      localStorage.setItem("sentenceCount_" + getTodayKey(), sentenceCount);
      localStorage.setItem("workSeconds_" + getTodayKey(), workSeconds);
    }

    function startStatsClock() {
      setInterval(() => {
        workSeconds++;
        updateStats();
      }, 1000);
    }

    function toggleReadingMode() {
      isRandomMode = !isRandomMode;
      const btn = document.getElementById("toggleModeBtn");
      btn.textContent = isRandomMode ? "Mod: Rastgele" : "Mod: Sƒ±ralƒ±";
    }

    window.onload = function () {
      currentIndex = 0;
      updateStats();
      startStatsClock();
      // ƒ∞lk y√ºklemede t√ºm metni g√∂ster
      document.getElementById("currentSentence").innerHTML =
        sentences.map(line => "<p>" + line + "</p>").join("");
    };

    function speakRandomSentence() {
      if (!isSpeaking) return;

      synth.cancel();

      let sentence;
      if (isRandomMode) {
        sentence = sentences[Math.floor(Math.random() * sentences.length)];
      } else {
        if (currentIndex >= sentences.length) currentIndex = 0;
        sentence = sentences[currentIndex];
        currentIndex++;
      }

      let utterance = new SpeechSynthesisUtterance(sentence);
      utterance.lang = 'de-DE';
      utterance.rate = 0.9;

      synth.speak(utterance);

      sentenceCount++;
      updateStats();

      utterance.onend = () => {
        let multiplier = parseFloat(document.getElementById('delayInput').value) || 0.1;
        let wordCount = sentence.trim().split(/\s+/).length;
        let calculatedDelay = wordCount * multiplier;
        speakingLoop = setTimeout(speakRandomSentence, calculatedDelay * 1000);
      };
    }

    function toggleSpeech() {
      const button = document.getElementById("startButton");

      if (!isSpeaking) {
        isSpeaking = true;
        button.style.backgroundColor = "#4CAF50";
        button.textContent = " üé§ Konu≈ümayƒ± Durdur";
        speakRandomSentence();
      } else {
        isSpeaking = false;
        button.style.backgroundColor = "#db343c";
        button.innerHTML = '<span class="mic">üé§</span> Konu≈ümaya Ba≈üla';
        synth.cancel();
        clearTimeout(speakingLoop);
      }
    }
  </script>
</body>
</html>
