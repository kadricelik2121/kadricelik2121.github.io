<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Almanca Diyalog Dinle</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      padding-top: 80px;
      background-color: #f2f2f2;
    }
    button {
      font-size: 24px;
      padding: 20px 40px;
      border: none;
      background-color: #4CAF50;
      color: white;
      border-radius: 12px;
      cursor: pointer;
      margin-top: 20px;
    }
    button:hover {
      background-color: #45a049;
    }
    .mic {
      margin-right: 10px;
    }
    #settings {
      margin-bottom: 30px;
    }
    input {
      font-size: 18px;
      width: 60px;
      text-align: center;
    }
    .zurueck-zentrale-box {
      text-align: center;
      margin-top: 50px;
      margin-bottom: 30px;
    }
    .zurueck-button {
      display: inline-block;
      padding: 12px 24px;
      font-size: 18px;
      background-color: #db343c;
      color: white;
      border: none;
      border-radius: 8px;
      text-decoration: none;
      transition: background-color 0.3s ease;
    }
    .zurueck-button:hover {
      background-color: #2c80b4;
    }
    .home-button {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      background-color: #007BFF;
      color: white;
      padding: 12px 24px;
      font-size: 18px;
      font-weight: bold;
      border-radius: 30px;
      text-decoration: none;
      box-shadow: 0px 4px 10px rgba(0,0,0,0.3);
      z-index: 9999;
      transition: background-color 0.3s ease;
    }
    .home-button:hover {
      background-color: #0056b3;
    }
    #toggleModeBtn {
      position: fixed;
      font-weight: bold;
      top: 10px;
      right: 10px;
      font-size: 14px;
      padding: 10px 18px;
      z-index: 1000;
      cursor: pointer;
      color: rgb(18, 19, 19);
      background-color: #acaaaa;
    }
    #statsBox {
      position: fixed;
      top: 15px;
      left: 10px;
      background-color: white;
      border: 2px solid #444;
      border-radius: 10px;
      padding: 10px 15px;
      font-size: 14px;
      z-index: 1000;
      text-align: left;
      line-height: 1.5;
    }
  </style>
</head>
<body>

  <div id="settings">
    <label for="delayInput">Bekleme √ßarpanƒ± (saniye): </label>
    <input type="number" id="delayInput" value="0.7" step="0.1" min="0">
  </div>

  <button onclick="toggleSpeech()" id="startButton">
    <span class="mic">üé§</span> Konu≈ümaya Ba≈üla
  </button>

  <div class="zurueck-zentrale-box">
    <a href="index.html" class="home-button">üè† Ana Sayfaya D√∂n</a>
  </div>

  <div id="currentSentence" style="font-size: 34px; font-weight: bold; margin-top: 20px; text-align: center;"></div>

  <button id="toggleModeBtn" onclick="toggleReadingMode()">Mod: Sƒ±ralƒ±</button>

  <div id="statsBox">
    üìä √ñƒürenilen: <span id="sentenceCount">0</span><br />
    ‚è±Ô∏è S√ºre: <span id="workTime">0</span> dk
  </div>

  <script>
    let isSpeaking = false;
    let synth = window.speechSynthesis;
    let speakingLoop;
    let isRandomMode = false;
    let currentIndex = 0;

    const sentences = [
      " Manchmal beeinflussen uns sogar Dinge, an die wir eigentlich gar nicht glauben.",
   "Ich m√∂chte Ihnen heute eine pers√∂nliche Geschichte erz√§hlen.",
   "Letztes Jahr bin ich mit meiner Frau und unseren Kindern nach Lausanne in der Schweiz gefahren, um meinen Onkel zu besuchen.",

`Von au√üen sah es wie ein ganz normaler Familienbesuch aus, aber innerlich sah es ganz anders aus.`,

`Immer wenn mein Onkel etwas Neues von mir sah ‚Äì ein Auto oder einen wertvollen Gegenstand ‚Äì, ging es kurz danach kaputt.`,

`In unserer Kultur nennt man das den ‚Äûb√∂sen Blick.`,

`Ich glaube eigentlich nicht daran, aber diese sich wiederholenden Erlebnisse haben mich beeinflusst.`,

`Bei diesem Besuch hatten wir ein neues Auto, das mein Onkel noch nie gesehen hatte.`,
`Wochenlang haben meine Frau und ich dar√ºber gesprochen, aber wollten das unseren Kindern nicht zeigen.`,

`Einen Tag vor der Reise schlug meine Frau vor, ein Nazar-Amulett ans Auto zu h√§ngen.`,

`Ich glaubte nicht daran, aber weil sie sich dadurch besser f√ºhlte, stimmte ich zu.`,

`Nach langer Suche in Gie√üen fanden wir endlich in einem kleinen Laden ein Amulett.`,

`Unsere Kinder sahen das Amulett und fragten sofort:`,


`‚ÄûWarum h√§ngt ihr das ans Auto?‚Äú`,

`Wir wollten ihnen keinen Aberglauben beibringen.`,

`Meine Frau antwortete: ‚ÄûEs soll uns vor b√∂sen Blicken und Unf√§llen sch√ºtzen.`,

`Die Kinder fragten dann: ‚ÄûHat der Onkel etwa einen b√∂sen Blick?`,

`Meine Frau erkl√§rte: ‚ÄûNein, das ist nur allgemein zur Sicherheit.`,

`Als wir losfuhren, hatte ich ein starkes, unangenehmes Gef√ºhl in mir, das einfach nicht wegging.`,


`Ich schaute auf das Amulett an der Windschutzscheibe und dachte:`,

`‚ÄûWenn der b√∂se Blick tats√§chlich wirkt, zerbricht genau hier die Scheibe.`,

`Wir kamen schlie√ülich bei meinem Onkel an, der uns freundlich begr√º√üte und sich auch das Auto genau ansah.`,


`Trotzdem passierte nichts. Nach etwa drei Stunden fuhren wir weiter ins Hotel.`,


`Am n√§chsten Morgen machten wir einen kurzen Ausflug in die Alpen und wollten uns danach verabschieden.`,

`Doch auf dem Weg zu ihm standen wir pl√∂tzlich auf einem Bahn√ºbergang, und die Schranken gingen herunter.`,

`Wir h√§tten noch zur√ºcksetzen k√∂nnen, aber ich war wie gel√§hmt.`,


`Wir sa√üen still im Auto, als Familie.`,

`Die Schranke traf die Windschutzscheibe, sie zerbrach und die Vorderseite des Autos wurde besch√§digt.`,

`Und das Merkw√ºrdigste war: Die Scheibe zerbrach genau an der Stelle, von der ich vorher gedacht hatte:`,

`‚ÄûWenn der b√∂se Blick wirkt, dann zerbricht sie hier.‚Äú`,

`Ich fuhr das Auto an den Stra√üenrand und versuchte, mich zu beruhigen.`,

`In diesem Moment stellte sich eine noch schwierigere Frage:`,

`Unsere Kinder wollten wissen, warum das Amulett uns nicht besch√ºtzt hatte.`,

`Zum Schluss m√∂chte ich sagen: Egal ob man an etwas Gutes oder Schlechtes glaubt `,

`wenn man stark genug daran glaubt, √ºbernimmt dieser Glaube irgendwann die Kontrolle,`,

`weil unser Gehirn beginnt, das Gedachte in die Realit√§t umzusetzen.`,

`Vielen Dank f√ºr Ihre Aufmerksamkeit`


    ];

    function getTodayKey() {
      const now = new Date();
      return now.toISOString().slice(0, 10);
    }

    let sentenceCount = parseInt(localStorage.getItem("sentenceCount_" + getTodayKey())) || 0;
    let workSeconds = parseInt(localStorage.getItem("workSeconds_" + getTodayKey())) || 0;

    function updateStats() {
      document.getElementById("sentenceCount").textContent = sentenceCount;
      document.getElementById("workTime").textContent = Math.floor(workSeconds / 60);
      localStorage.setItem("sentenceCount_" + getTodayKey(), sentenceCount);
      localStorage.setItem("workSeconds_" + getTodayKey(), workSeconds);
    }

    function startStatsClock() {
      setInterval(() => {
        workSeconds++;
        updateStats();
      }, 1000);
    }

    function toggleReadingMode() {
      isRandomMode = !isRandomMode;
      const btn = document.getElementById("toggleModeBtn");
      btn.textContent = isRandomMode ? "Mod: Rastgele" : "Mod: Sƒ±ralƒ±";
    }

    window.onload = function () {
      currentIndex = 0; // HER ZAMAN BA≈ûTAN BA≈ûLA
      updateStats();
      startStatsClock();
    };

    function speakRandomSentence() {
      if (!isSpeaking) return;

      synth.cancel();

      let sentence;
      if (isRandomMode) {
        sentence = sentences[Math.floor(Math.random() * sentences.length)];
      } else {
        if (currentIndex >= sentences.length) currentIndex = 0;
        sentence = sentences[currentIndex];
        // localStorage.setItem("lastSentenceIndex", currentIndex); // KALDIRILDI!
        currentIndex++;
      }

      document.getElementById("currentSentence").textContent = sentence;

      let utterance = new SpeechSynthesisUtterance(sentence);
      utterance.lang = 'de-DE';
      utterance.rate = 0.9;

      synth.speak(utterance);

      sentenceCount++;
      updateStats();

      utterance.onend = () => {
        let multiplier = parseFloat(document.getElementById('delayInput').value) || 0.7;
        let wordCount = sentence.trim().split(/\s+/).length;
        let calculatedDelay = wordCount * multiplier;
        speakingLoop = setTimeout(speakRandomSentence, calculatedDelay * 1000);
      };
    }

    function toggleSpeech() {
      const button = document.getElementById("startButton");

      if (!isSpeaking) {
        isSpeaking = true;
        button.style.backgroundColor = "#4CAF50";
        button.textContent = " üé§ Konu≈ümayƒ± Durdur";
        speakRandomSentence();
      } else {
        isSpeaking = false;
        button.style.backgroundColor = "#db343c";
        button.innerHTML = '<span class="mic">üé§</span> Konu≈ümaya Ba≈üla';
        synth.cancel();
        clearTimeout(speakingLoop);
      }
    }
  </script>
</body>
</html>

